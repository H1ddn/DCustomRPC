version: 2
jobs:
  one:
    docker:
      - image: circleci/python:3.7.0-stretch-browsers
    steps:
      - checkout
      - run: sudo apt update
      - run: sudo apt install -y libyaml-dev python3-dev python-dev
      - run: python -V
      - run: sudo python -m pip install -r requirements.txt
      - run: sudo python -m pip install pycodestyle
      - run: sudo python -m pycodestyle .
      - run: python3.6 -c "import ruamel.yaml; ruamel.yaml.load(open('config.yaml', 'r'), Loader=ruamel.yaml.Loader)"
  two:
    docker:
      - image: circleci/python:3.6-stretch-browsers
    steps:
      - checkout
      - run: python -V
      - run: sudo pip install -r requirements.txt
      - run: sudo pip install pycodestyle
      - run: pycodestyle .
      - run: python -c "import ruamel.yaml; ruamel.yaml.load(open('config.yaml', 'r'), Loader=ruamel.yaml.Loader)"

workflows:
  version: 2
  one_and_two:
    jobs:
      - one
      - two
